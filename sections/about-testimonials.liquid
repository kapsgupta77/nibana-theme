{% comment %}
About — Testimonials (inset)
Wrapper around the shared 'nb-service-testimonials-belt' snippet,
but forces an inset/panel look on About by overriding the belt's
root full-bleed panel styles.
{% endcomment %}

{% liquid
  assign _heading   = section.settings.heading    | default: 'What our clients say'
  assign _limit     = section.settings.limit      | default: 6
  assign _carousel  = section.settings.carousel   | default: true
  assign _tag       = section.settings.tag_filter | default: 'All'
  assign _mo_list   = section.settings.mo_list
  assign _service   = section.settings.service
%}

<section class="nb-about-testimonials color-scheme-{{ section.settings.color_scheme }}">
  {%- render 'nb-service-testimonials-belt',
    heading: _heading,
    tag_filter: _tag,
    limit: _limit,
    carousel: _carousel,
    mo_list: _mo_list,
    service: _service
  -%}
</section>

<style>
  /* Keep About version inset and transparent at the section edge */
  .nb-about-testimonials{ margin-block: clamp(20px, 5vw, 72px); background: transparent; }

  /* OVERRIDES: the shared belt paints its panel on the root section;
     for About we want that panel *inside* the content width */
  .nb-about-testimonials .nb-service-tbelt--panel{
    background: transparent !important;
    padding: 0 !important;
    box-shadow: none !important;
    border-radius: 0 !important;
  }

  /* Apply the panel styling to the inner container instead */
  .nb-about-testimonials .nb-testimonials__container{
    max-width: var(--narrow-page-width, 1120px);
    margin: 0 auto;
    padding: 0 20px;
  }
  .nb-about-testimonials .nb-service-tbelt__panel{
    background: var(--nb-mist, #F3FAF8);
    border-radius: 20px;
    padding: clamp(18px, 2.4vw, 28px);
    box-shadow:
      0 10px 28px rgba(12, 138, 123, 0.08),
      0 1px 0 rgba(255,255,255,0.8) inset;
  }
</style>

{% schema %}
{
  "name": "About — Testimonials",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "What our clients say" },
    { "type": "range", "id": "limit", "label": "Max items", "min": 1, "max": 12, "step": 1, "default": 6 },
    { "type": "checkbox", "id": "carousel", "label": "Enable slider", "default": true },

    { "type": "metaobject", "id": "service", "label": "Service (optional: use its testimonial list)", "metaobject_type": "coachingservice" },
    { "type": "metaobject_list", "id": "mo_list", "label": "Choose testimonials (optional)", "metaobject_type": "nb_testimonial" },
    { "type": "text", "id": "tag_filter", "label": "Tag filter (comma-separated or 'All')", "default": "All" },

    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" }
  ],
  "presets": [
    { "name": "About — Testimonials", "category": "Testimonials" }
  ]
}
{% endschema %}
