{% comment %}
About — What makes us different (pillars grid, minimal-safe version)
- One item per line; optional short blurb after a pipe (" | ")
{% endcomment %}

{% liquid
  assign _heading = section.settings.heading | default: 'What makes us different'
  assign _intro   = section.settings.intro
  assign _panel   = section.settings.panel
  assign _columns = section.settings.columns | default: '3'

  assign raw_txt = section.settings.items_text | default: ''
  assign norm = raw_txt | replace: '\r\n', '\n'
  assign norm = norm | replace: '&#13;', ''
  assign norm = norm | replace: '&#10;', '\n'
  assign as_html = norm | newline_to_br
  assign with_delims = as_html | replace: '<br />', '|||'
  assign with_delims = with_delims | replace: '<br/>', '|||'
  assign with_delims = with_delims | replace: '<br>', '|||'
  assign lines = with_delims | split: '|||'
%}

<section class="nb-about-diff color-scheme-{{ section.settings.color_scheme }}">
  <div
    class="nb-shell nb-about-diff__wrap{% if _panel %} nb-about-diff__panel{% endif %}"
    {% if _panel %}style="--nb-panel-bg: {{ section.settings.panel_color | default: '#F3FAF8' }}"{% endif %}
  >
    <header class="nb-about-diff__head">
      <h2 class="nb-h2 nb-about-diff__title">{{ _heading }}</h2>
      {% if _intro != blank %}
        <div class="nb-rte nb-about-diff__intro">{{ _intro }}</div>
      {% endif %}
    </header>

    <ul class="nb-about-diff__grid nb-about-diff__grid--cols-{{ _columns }}">
      {% for l in lines %}
        {% assign t = l | strip %}
        {% if t != '' %}
          {% assign title = t %}
          {% assign desc  = '' %}
          {% if t contains '|' %}
            {% assign parts = t | split: '|' %}
            {% assign title = parts[0] | strip %}
            {% assign desc  = parts[1] | strip %}
          {% endif %}
          <li class="nb-about-diff__card">
            <div class="nb-about-diff__title">{{ title }}</div>
            {% if desc != '' %}
              <div class="nb-about-diff__desc">{{ desc }}</div>
            {% endif %}
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
</section>

<style>
  .nb-about-diff__wrap{ position:relative; padding: clamp(18px, 2.2vw, 26px); }
  .nb-about-diff__panel{
    background: var(--nb-panel-bg, var(--nb-mist, #F3FAF8));
    border-radius: 20px;
    box-shadow: 0 10px 28px rgba(12,138,123,.08), 0 1px 0 rgba(255,255,255,.8) inset;
    margin-block: clamp(14px, 2.2vw, 22px);
  }

  .nb-about-diff__head{ margin-bottom: clamp(10px,1.4vw,16px); }
  .nb-about-diff__intro{ margin-top: 6px; }

  .nb-about-diff__grid{ list-style:none; margin:0; padding:0; display:grid; gap: clamp(12px, 1.8vw, 18px); }
  .nb-about-diff__grid--cols-2{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .nb-about-diff__grid--cols-3{ grid-template-columns: repeat(3, minmax(0,1fr)); }
  @media (max-width: 900px){
    .nb-about-diff__grid--cols-2,
    .nb-about-diff__grid--cols-3{ grid-template-columns: 1fr; }
  }

  .nb-about-diff__card{
    background:#fff; border:1px solid #e8ecef; border-radius:14px;
    padding: clamp(12px,1.6vw,16px) clamp(14px,1.8vw,18px);
    box-shadow:0 2px 8px rgba(0,0,0,.03);
  }
  .nb-about-diff__title{ font-weight:700; color: var(--nb-ink, #1F2C2A); }
  .nb-about-diff__desc{ margin-top: 6px; color: var(--nb-muted, #445); opacity:.95; }
</style>

{% schema %}
{
  "name": "About — Different",
  "settings": [
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "color", "id": "panel_color", "label": "Panel background override", "default": "#F3FAF8" },

    { "type": "text", "id": "heading", "label": "Heading", "default": "What makes us different" },
    { "type": "richtext", "id": "intro", "label": "Intro (optional)", "default": "<p>A few core principles guide how we work.</p>" },

    { "type": "select", "id": "columns", "label": "Columns (desktop)", "options": [
      { "value": "2", "label": "Two" },
      { "value": "3", "label": "Three" }
    ], "default": "3" },

    { "type": "textarea", "id": "items_text", "label": "Pillars — one per line (optional blurb with |)", "default": "Embodied approach | We combine mind, body, and soul.\nIdentity work | We start at the level of who you are, not just habits.\nPractices that stick | Simple reps that compound into durable change.\nStraight, respectful conversations | No fluff. We go at the pace of truth.\nPlay as principle | We make room for joy and aliveness while we work." },

    { "type": "checkbox", "id": "panel", "label": "Mint panel background", "default": true }
  ],
  "presets": [
    { "name": "About — What makes us different", "category": "About" }
  ]
}
{% endschema %}
