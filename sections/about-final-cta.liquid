{% comment %}
About — Final CTA band (centered)
- Simple, reusable CTA with optional subheading
- Panel background toggle + color picker + color scheme
- Uses a TEXT field for the link to avoid strict URL default validation
{% endcomment %}

<section
  id="nb-about-final-cta-{{ section.id }}"
  class="nb-about-final-cta {{ section.settings.color_scheme }}"
  style="padding-block-start: {{ section.settings.pad_top }}px; padding-block-end: {{ section.settings.pad_bottom }}px;"
>
  <div class="nb-shell">
    <div class="nb-fcta__wrap"
      {% if section.settings.panel_on %}style="--nb-panel-bg: {{ section.settings.panel_color | default: '#F3FAF8' }};"{% endif %}
    >
      {% if section.settings.kicker != blank %}
        <p class="nb-kicker nb-fcta__kicker">{{ section.settings.kicker }}</p>
      {% endif %}

      <h2 class="nb-h2 nb-fcta__title">{{ section.settings.heading }}</h2>

      {% if section.settings.subheading != blank %}
        <p class="nb-fcta__sub">{{ section.settings.subheading }}</p>
      {% endif %}

      {% if section.settings.cta_label != blank and section.settings.cta_link != blank %}
        <div class="nb-fcta__actions">
          <a class="nb-cta nb-cta--xl" href="{{ section.settings.cta_link }}" data-cta="about-final-cta">{{ section.settings.cta_label }}</a>
        </div>
      {% endif %}
    </div>
  </div>

  <style>
    .nb-about-final-cta .nb-fcta__wrap{
      text-align:center;
      background: {% if section.settings.panel_on %}var(--nb-panel-bg, var(--nb-mist, #F3FAF8)){% else %}transparent{% endif %};
      border-radius: 20px;
      padding: clamp(22px, 3vw, 36px);
      box-shadow: {% if section.settings.panel_on %}0 10px 28px rgba(12,138,123,.08), 0 1px 0 rgba(255,255,255,.8) inset{% else %}none{% endif %};
    }

    .nb-about-final-cta .nb-fcta__sub{ margin: 0 0 14px; opacity:.92; }
    .nb-about-final-cta .nb-fcta__actions{ margin-top: 10px; }
  </style>
</section>

{% schema %}
{
  "name": "About—Final CTA",
  "class": "section-wrapper nb-about-final-cta-wrap",
  "settings": [
    { "type": "text", "id": "kicker", "label": "Kicker", "default": "Ready?" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Ready to work together?" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Book a free 20-minute call to see if we’re a fit." },

    { "type": "text", "id": "cta_label", "label": "CTA label", "default": "Book a 20-min free call" },
    { "type": "text", "id": "cta_link", "label": "CTA link", "default": "/pages/book-a-call" },

    { "type": "checkbox", "id": "panel_on", "label": "Show panel background", "default": true },
    { "type": "color", "id": "panel_color", "label": "Panel background color", "default": "#F3FAF8" },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },

    { "type": "range", "id": "pad_top", "label": "Top padding", "min": 0, "max": 120, "step": 2, "unit": "px", "default": 0 },
    { "type": "range", "id": "pad_bottom", "label": "Bottom padding", "min": 0, "max": 120, "step": 2, "unit": "px", "default": 0 }
  ],
  "presets": [
    { "name": "About—Final CTA" }
  ]
}
{% endschema %}
