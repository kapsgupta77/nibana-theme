{%- comment -%}
Inputs (passed as named params):
  quote (string), name (string), title (string), location (string),
  avatar (image), tags (comma/semicolon list for filtering)
{%- endcomment -%}

{%- liquid
  assign tags_norm = tags | default: '' | replace: ';', ',' | replace: ' ,', ',' | replace: ', ', ',' | downcase
-%}

<article class="nb-tcard" data-tags="{{ tags_norm | escape }}">
  <span class="nb-tcard__accent" aria-hidden="true"></span>

  {%- if quote != blank -%}
    <blockquote class="nb-tcard__quote" data-q>
      {{ quote }}
    </blockquote>
  {%- endif -%}

  <div class="nb-tcard__meta">
    <div class="nb-tcard__avatar" aria-hidden="true">
      {%- if avatar != blank -%}
        {{ avatar
          | image_url: width: 120
          | image_tag: alt: name, class: 'nb-tcard__avatar-img', loading: 'lazy', widths: '60,90,120' }}
      {%- endif -%}
    </div>
    <div class="nb-tcard__who">
      {%- if name != blank -%}<div class="nb-tcard__name">{{ name }}</div>{%- endif -%}
      {%- if title != blank -%}<div class="nb-tcard__title">{{ title }}</div>{%- endif -%}
      {%- if location != blank -%}<div class="nb-tcard__loc">{{ location }}</div>{%- endif -%}
    </div>
  </div>

  <button type="button" class="nb-tcard__more" data-more hidden>Read full</button>
</article>
