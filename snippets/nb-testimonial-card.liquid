{%- comment -%}
Card snippet used by the Testimonials section (and slider).
Params: quote, name, title, location, avatar, tags
{%- endcomment -%}

{%- assign _quote = quote | strip | default: '' -%}
{%- assign _name  = name  | strip | default: '' -%}
{%- assign _title = title | strip | default: '' -%}
{%- assign _loc   = location | strip | default: '' -%}
{%- assign _tagsr = tags | default: '' | replace: ';', ',' | replace: ' ,', ',' | replace: ', ', ',' -%}

<article class="nb-tcard" data-tags="{{ _tagsr | downcase }}">
  <span class="nb-tcard__accent" aria-hidden="true"></span>

  <div class="nb-tcard__quote" data-q tabindex="0" aria-label="Testimonial">
    <span class="nb-tcard__qmark" aria-hidden="true">â€œ</span>
    <p>{{ _quote }}</p>
  </div>

  <div class="nb-tcard__meta">
    {%- if avatar -%}
      <figure class="nb-tcard__avatar">
        {{ avatar
          | image_url: width: 128
          | image_tag: alt: _name, class: 'nb-tcard__avatar-img', sizes: '48px', widths: '64,96,128' }}
      </figure>
    {%- endif -%}

    <div class="nb-tcard__who">
      {%- if _name  != '' -%}<div class="nb-tcard__name">{{ _name }}</div>{%- endif -%}
      {%- if _title != '' -%}<div class="nb-tcard__title">{{ _title }}</div>{%- endif -%}
      {%- if _loc   != '' -%}<div class="nb-tcard__loc">{{ _loc }}</div>{%- endif -%}
    </div>
  </div>

  <button class="nb-tcard__more" data-more aria-expanded="false">Read full</button>
</article>
